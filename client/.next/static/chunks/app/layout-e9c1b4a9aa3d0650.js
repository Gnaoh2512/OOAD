(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{239:(t,e,r)=>{"use strict";r.d(e,{AuthProvider:()=>l,A:()=>o});var a=r(5155),n=r(2115),s=r(8999),u=r(485);let i=(0,n.createContext)(void 0);function l(t){let{children:e}=t,[r,l]=(0,n.useState)(null),[o,h]=(0,n.useState)(!0),c=(0,s.useRouter)(),d=async()=>{try{await (0,u.A)("".concat("http://localhost:5000","/auth/logout"),{method:"POST"})}finally{l(null),c.push("/auth")}};return(0,n.useEffect)(()=>{(async()=>{try{let t=await (0,u.A)("".concat("http://localhost:5000","/auth/profile"));t?l({user_id:t.id,user_name:t.user_name,email:t.email}):l(null)}finally{h(!1)}})()},[]),(0,n.useEffect)(()=>{o||r||c.push("/auth")},[o,r,c]),(0,a.jsx)(i.Provider,{value:{user:r,loading:o,logout:d},children:e})}let o=()=>{let t=(0,n.useContext)(i);if(!t)throw Error("useAuth must be used within an AuthProvider");return t}},347:()=>{},485:(t,e,r)=>{"use strict";r.d(e,{A:()=>a});let a=async function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{method:r="GET",body:a,headers:n={},responseType:s="json"}=e,u={method:r,headers:{"Content-Type":"application/json",...n},...a&&{body:JSON.stringify(a)},credentials:"include"},i=await fetch(t,u);if(!i.ok)throw Error("Failed to fetch: ".concat(i.statusText));if("text"===s)return i.text();let l=await i.text();return l?JSON.parse(l):{}}},965:(t,e,r)=>{Promise.resolve().then(r.t.bind(r,347,23)),Promise.resolve().then(r.bind(r,239))}},t=>{var e=e=>t(t.s=e);t.O(0,[690,441,684,358],()=>e(965)),_N_E=t.O()}]);